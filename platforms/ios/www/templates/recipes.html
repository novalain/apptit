<ion-view title="Apptit">

    <div class="bar bar-subheader bar-dark">

        <div class="item item-input textInput">

            <i class="icon ion-search placeholder-icon"></i>
            <input id="input" ng-model="searchText.name" type="text" placeholder="Recept eller ingrediens">


            <button ng-click="showFavRecipesChange()"id="heartButton" class="button-icon icon ion-ios7-heart-outline favHeartInMainMenu"></button>


        </div>
    </div>


    <ion-nav-bar id="navBar" class="bar-balanced">

      <ion-nav-back-button class="button-icon icon ion-ios7-arrow-back"></ion-nav-back-button>

      <a ng-href="#/recipes/new-recipe" class="button button-icon icon ion-compose"></a>

      <ion-nav-buttons side="right">
         <button ng-click="openModal()" class="button button-icon icon ion-ios7-information-outline"></button>
      </ion-nav-buttons>

    </ion-nav-bar>

    <ion-content class="has-header contentContainer" header-shrink scroll-event-interval="5" has-bouncing="true">

      <!-- Pga shrinking header -->
      <div style="height:55px;"></div>

          <!-- För att den ska reagera på scroll event..-->
          <div class="tabs"></div>

          <!--Ej favoriter-->
      	  <a ng-if = "!checked" ng-repeat="recipe in recipes | filter:searchText:strict" ng-href="#/recipes/{{recipe.id}}">

        		<div ng-style="{'width': '{{container_size}}', 'height': '{{container_size}}'}" ng-class="$index%2 == 0 ? 'recipeContainer1' : 'recipeContainer2'">

        			<div id="picTextContainer{{recipe.id}}" class="picTextContainer"><p>{{recipe.name}}</p></div>

        			<img ng-style="{'height': '{{pic_height}}'}" class = "recipePicInMainMenu" imageonload ng-src= "{{recipe.picUrl}}"/>

              <span class="loading">

                <div class = "loadingIconMainContainer">
                  <i class="icon ion-loading-c loadingIconMain"></i>
                </div>

              </span>

            </div>
          </a>

          <!--Ej favoriter användarrecept -->
          <a ng-if = "!checked" ng-repeat="recipe in user_recipes | filter:searchText:strict" ng-href="#/recipes-user/{{recipe.id}}">

            <div ng-style="{'width': '{{container_size}}', 'height': '{{container_size}}'}" ng-class="(recipes | filter:searchText:strict).length % 2 == 0 ? ($index % 2 == 0 ? 'recipeContainer1' : 'recipeContainer2') :
            ($index % 2 == 0 ? 'recipeContainer2' : 'recipeContainer1')">

              <div id="picTextContainer_user{{recipe.id}}" class="picTextContainer"><p>{{recipe.name}}</p></div>

              <img id = "user_recipe_img{{recipe.id}}" ng-style="{'height': '{{pic_height}}', 'width':'{{pic_height}}'}"  on-hold = "takePicture({{recipe.id}})" class = "recipePicInMainMenu" imageonload ng-src= "{{recipe.picUrl}}"/>

              <span class="loading">

                <div class = "loadingIconMainContainer">
                  <i class="icon ion-loading-c loadingIconMain"></i>
                </div>

              </span>
            </div>
          </a>

          <!-- Favoriter-->
          <a ng-if = "checked" ng-repeat="recipe in favRecipes | filter:searchText:strict" href="#/recipes/{{recipe.id}}">

        		<div ng-style="{'width': '{{container_size}}', 'height': '{{container_size}}'}" ng-class="$index%2 == 0 ? 'recipeContainer1' : 'recipeContainer2'">

        			<div id="picTextContainer{{recipe.id}}" class="picTextContainer"><p>{{recipe.name}}</p></div>

              <img ng-style="{'height': '{{pic_height}}'}" class="recipePicInMainMenu" imageonload ng-src= "{{recipe.picUrl}}"/>

              <span class="loading">

                <div class = "loadingIconMainContainer">
                  <i class="icon ion-loading-c loadingIconMain"></i>
                </div>

              </span>
      	    </div>
          </a>

          <!-- Favoriter USER recipes-->
          <a ng-if = "checked" ng-repeat="recipe in favUserRecipes | filter:searchText:strict"  href="#/recipes-user/{{recipe.id}}">

            <div ng-style="{'width': '{{container_size}}', 'height': '{{container_size}}'}" ng-class="(favRecipes | filter:searchText:strict).length % 2 == 0 ? ($index % 2 == 0 ? 'recipeContainer1' : 'recipeContainer2') :
            ($index % 2 == 0 ? 'recipeContainer2' : 'recipeContainer1')">

              <div id="picTextContainer{{recipe.id}}" class="picTextContainer"><p>{{recipe.name}}</p></div>

              <img ng-style="{'height': '{{pic_height}}', 'width':'{{pic_height}}'}" class="recipePicInMainMenu" imageonload ng-src= "{{recipe.picUrl}}"/>

              <span class="loading">

                <div class = "loadingIconMainContainer">
                  <i class="icon ion-loading-c loadingIconMain"></i>
                </div>

              </span>
            </div>
          </a>


        	<p class ="noResults">

            <span ng-if="!checked && (recipes | filter:searchText).length == 0 && (user_recipes | filter:searchText).length == 0  ">Inga recept hittade</span>

            <span ng-if="checked && (favRecipes | filter:searchText).length == 0 && (favUserRecipes | filter:searchText).length == 0 && searchText.name.length">Inga recept hittade</span>

          	<span ng-if="checked && favRecipes.length === 0 && favUserRecipes.length === 0 && !searchText.name.length">Inga favoriter</span>

          </p>


        <!--Lite space på slutet pga shrinking header -->

        <div style="height:53px; width:100%; float:left; "></div>

    </ion-content>



</ion-view>
